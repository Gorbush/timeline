PHONY: install build push env-gen

ENV_GEN_FILE=".env_generated"

install:
	pip install -r requirements.txt
	wget -O ssd.tgz https://tfhub.dev/google/openimages_v4/ssd/mobilenet_v2/1?tf-hub-format=compressed

build:
	docker build . -t hulk66/timeline_be:${IMAGE_VERSION}

build-base:
	docker build . -f Dockerfile.be-base -t hulk66/timeline_be_base:${IMAGE_VERSION}

push:	
	docker push hulk66/timeline_be:${IMAGE_VERSION}

env-gen:
	echo -n "#\n# Do not edit this file. It is generated!\n#\n" > ${ENV_GEN_FILE}
	cat ../.env > ${ENV_GEN_FILE}
	cat .env >> ${ENV_GEN_FILE}
